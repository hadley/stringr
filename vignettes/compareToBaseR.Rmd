---
title: "Comparing stringr to base R"
author: "Sara Stoudt"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

[Solving this issue](https://github.com/tidyverse/stringr/issues/266) for tidy-dev-day.


`str_c`

```{r}
str_c("Letter: ", letters)
paste("Letter: ",letters,sep="")
```

```{r}
str_c("Letter", letters, sep = ": ")
paste("Letter", letters, sep = ": ")
```

`str_conv`



`str_count`

```{r}
fruit <- c("apple", "banana", "pear", "pinapple")

str_count(fruit, "a")
str_count(fruit, "p")
str_count(fruit, "e")
str_count(c("a.", "...", ".a.a"), ".")


countCharOccurrences <- function(char, s) {
    s2 <- gsub(char,"",s)
    return (nchar(s) - nchar(s2))
}#https://techoverflow.net/2012/11/10/r-count-occurrences-of-character-in-string/


countCharOccurrences("a",fruit)
countCharOccurrences("p",fruit)
countCharOccurrences("e",fruit)
countCharOccurrences(".",c("a.", "...", ".a.a"))
```


```{r}
## difference
str_count(fruit, c("a", "b", "p", "p"))
str_count(c("a.", "...", ".a.a"), fixed("."))

lapply(c("a", "b", "p", "p"),countCharOccurrences,fruit)
countCharOccurrences(fixed("."),c("a.", "...", ".a.a"))
```


`str_detect`

```{r}
str_detect(fruit, "a")
grepl("a", fruit)

str_detect(fruit, "^a")
grepl("^a", fruit)

str_detect(fruit, "a$")
grepl("a$", fruit)

str_detect(fruit, "b")
grepl("b", fruit)

str_detect(fruit, "[aeiou]")
grepl("[aeiou]", fruit)
```

```{r}
## difference
str_detect("aecfg", letters)
grepl("aecfg", letters)

lapply(unlist(str_split("aecfg","")),function(x){grepl(x,letters)}) 
## TO DO: need to collaps via "or"
```


`str_dup`

```{r}
fruit <- c("apple", "pear", "banana")
str_dup(fruit, 2)
str_dup(fruit, 1:3)
str_c("ba", str_dup("na", 0:5))


#https://stackoverflow.com/questions/22359127/how-to-repeat-a-string-n-times-in-r
unlist(lapply(lapply(fruit,function(x){replicate(2,x)}),paste,collapse=""))

unlist(lapply(mapply(function(x,y){replicate(x,y)},1:3,fruit),paste,collapse=""))

paste("ba",unlist(lapply(lapply(0:5,function(x){replicate(x,"na")}),paste,collapse="")),sep="")
```

`str_extract`

```{r}
shopping_list <- c("apples x4", "bag of flour", "bag of sugar", "milk x2")
str_extract(shopping_list, "\\d")
str_extract(shopping_list, "[a-z]+")

#https://stackoverflow.com/questions/47678725/how-to-do-str-extract-with-base-r
```

`str_flatten`

```{r}
str_flatten(letters)
paste(letters,collapse="")

str_flatten(letters, "-")
paste(letters,"-",sep="",collapse="")
```

`str_glue`


`str_length`
`str_locate`
`str_match`
`str_order`
`str_pad`
`str_remove`
`str_replace`
`str_replace_na`
`str_split`
`str_sub`
`str_subset`
`str_trim`
`str_trunc`
`str_view`
`str_wrap`
